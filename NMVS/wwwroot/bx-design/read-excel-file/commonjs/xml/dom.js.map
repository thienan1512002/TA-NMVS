{"version":3,"sources":["../../source/xml/dom.js"],"names":["findChild","node","tagName","i","childNodes","length","childNode","nodeType","getTagName","findChildren","results","push","forEach","func","map","NAMESPACE_REG_EXP","element","replace"],"mappings":";;;;;;;;;;;AAAO,SAASA,SAAT,CAAmBC,IAAnB,EAAyBC,OAAzB,EAAkC;AACxC,MAAIC,CAAC,GAAG,CAAR;;AACA,SAAOA,CAAC,GAAGF,IAAI,CAACG,UAAL,CAAgBC,MAA3B,EAAmC;AAClC,QAAMC,SAAS,GAAGL,IAAI,CAACG,UAAL,CAAgBD,CAAhB,CAAlB,CADkC,CAElC;AACA;;AACA,QAAIG,SAAS,CAACC,QAAV,KAAuB,CAAvB,IAA4BC,UAAU,CAACF,SAAD,CAAV,KAA0BJ,OAA1D,EAAmE;AAClE,aAAOI,SAAP;AACA;;AACDH,IAAAA,CAAC;AACD;AACD;;AAEM,SAASM,YAAT,CAAsBR,IAAtB,EAA4BC,OAA5B,EAAqC;AAC3C,MAAMQ,OAAO,GAAG,EAAhB;AACA,MAAIP,CAAC,GAAG,CAAR;;AACA,SAAOA,CAAC,GAAGF,IAAI,CAACG,UAAL,CAAgBC,MAA3B,EAAmC;AAClC,QAAMC,SAAS,GAAGL,IAAI,CAACG,UAAL,CAAgBD,CAAhB,CAAlB,CADkC,CAElC;AACA;;AACA,QAAIG,SAAS,CAACC,QAAV,KAAuB,CAAvB,IAA4BC,UAAU,CAACF,SAAD,CAAV,KAA0BJ,OAA1D,EAAmE;AAClEQ,MAAAA,OAAO,CAACC,IAAR,CAAaL,SAAb;AACA;;AACDH,IAAAA,CAAC;AACD;;AACD,SAAOO,OAAP;AACA;;AAEM,SAASE,OAAT,CAAiBX,IAAjB,EAAuBC,OAAvB,EAAgCW,IAAhC,EAAsC;AAC5C;AACA;AACA;AACA;AACA,MAAIV,CAAC,GAAG,CAAR;;AACA,SAAOA,CAAC,GAAGF,IAAI,CAACG,UAAL,CAAgBC,MAA3B,EAAmC;AAClC,QAAMC,SAAS,GAAGL,IAAI,CAACG,UAAL,CAAgBD,CAAhB,CAAlB;;AACA,QAAID,OAAJ,EAAa;AACZ;AACA;AACA,UAAII,SAAS,CAACC,QAAV,KAAuB,CAAvB,IAA4BC,UAAU,CAACF,SAAD,CAAV,KAA0BJ,OAA1D,EAAmE;AAClEW,QAAAA,IAAI,CAACP,SAAD,EAAYH,CAAZ,CAAJ;AACA;AACD,KAND,MAMO;AACNU,MAAAA,IAAI,CAACP,SAAD,EAAYH,CAAZ,CAAJ;AACA;;AACDA,IAAAA,CAAC;AACD;AACD;;AAEM,SAASW,GAAT,CAAab,IAAb,EAAmBC,OAAnB,EAA4BW,IAA5B,EAAkC;AACxC,MAAMH,OAAO,GAAG,EAAhB;AACAE,EAAAA,OAAO,CAACX,IAAD,EAAOC,OAAP,EAAgB,UAACD,IAAD,EAAOE,CAAP,EAAa;AACnCO,IAAAA,OAAO,CAACC,IAAR,CAAaE,IAAI,CAACZ,IAAD,EAAOE,CAAP,CAAjB;AACA,GAFM,CAAP;AAGA,SAAOO,OAAP;AACA;;AAED,IAAMK,iBAAiB,GAAG,MAA1B;;AACO,SAASP,UAAT,CAAoBQ,OAApB,EAA6B;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAOA,OAAO,CAACd,OAAR,CAAgBe,OAAhB,CAAwBF,iBAAxB,EAA2C,EAA3C,CAAP;AACA","sourcesContent":["export function findChild(node, tagName) {\n\tlet i = 0\n\twhile (i < node.childNodes.length) {\n\t\tconst childNode = node.childNodes[i]\n\t\t// `nodeType: 1` means \"Element\".\n\t\t// https://www.w3schools.com/xml/prop_element_nodetype.asp\n\t\tif (childNode.nodeType === 1 && getTagName(childNode) === tagName) {\n\t\t\treturn childNode\n\t\t}\n\t\ti++\n\t}\n}\n\nexport function findChildren(node, tagName) {\n\tconst results = []\n\tlet i = 0\n\twhile (i < node.childNodes.length) {\n\t\tconst childNode = node.childNodes[i]\n\t\t// `nodeType: 1` means \"Element\".\n\t\t// https://www.w3schools.com/xml/prop_element_nodetype.asp\n\t\tif (childNode.nodeType === 1 && getTagName(childNode) === tagName) {\n\t\t\tresults.push(childNode)\n\t\t}\n\t\ti++\n\t}\n\treturn results\n}\n\nexport function forEach(node, tagName, func) {\n\t// if (typeof tagName === 'function') {\n\t// \tfunc = tagName\n\t// \ttagName = undefined\n\t// }\n\tlet i = 0\n\twhile (i < node.childNodes.length) {\n\t\tconst childNode = node.childNodes[i]\n\t\tif (tagName) {\n\t\t\t// `nodeType: 1` means \"Element\".\n\t\t\t// https://www.w3schools.com/xml/prop_element_nodetype.asp\n\t\t\tif (childNode.nodeType === 1 && getTagName(childNode) === tagName) {\n\t\t\t\tfunc(childNode, i)\n\t\t\t}\n\t\t} else {\n\t\t\tfunc(childNode, i)\n\t\t}\n\t\ti++\n\t}\n}\n\nexport function map(node, tagName, func) {\n\tconst results = []\n\tforEach(node, tagName, (node, i) => {\n\t\tresults.push(func(node, i))\n\t})\n\treturn results\n}\n\nconst NAMESPACE_REG_EXP = /.+\\:/\nexport function getTagName(element) {\n\t// For some weird reason, if an element is declared as,\n\t// for example, `<x:sheets/>`, then its `.tagName` will be\n\t// \"x:sheets\" instead of just \"sheets\".\n\t// https://gitlab.com/catamphetamine/read-excel-file/-/issues/25\n\t// Its not clear how to tell it to ignore any namespaces\n\t// when getting `.tagName`, so just replacing anything\n\t// before a colon, if any.\n\treturn element.tagName.replace(NAMESPACE_REG_EXP, '')\n}"],"file":"dom.js"}